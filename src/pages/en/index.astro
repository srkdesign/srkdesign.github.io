---
// Content
import { getCollection, type CollectionEntry } from "astro:content";
import i18n from "i18next";

const locale = "en";

const projects = (
  await getCollection("projects", ({ data }: CollectionEntry<"projects">) => {
    return data.isDraft !== true;
  })
)
  .filter((entry) => {
    const entryLocale = entry.id.includes("/")
      ? entry.id.split("/")[0]
      : console.log("No locale defined in project name");
    return entryLocale === locale;
  })
  .sort(
    (a: CollectionEntry<"projects">, b: CollectionEntry<"projects">) =>
      b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
  );
// console.log(projects);

// Components
import Layout from "@layouts/Layout.astro";
import HomeLayout from "@layouts/HomeLayout.jsx";
import { buildStaticPaths } from "astro-react-i18next/utils";

export function getStaticPaths() {
  return buildStaticPaths();
}
---

<Layout title={i18n.t("site.title")} description={i18n.t("site.description")}>
  <!-- Using dedicated React Component for smooth animation -->
  <HomeLayout projects={projects} locale={locale} client:only="react" />
</Layout>
